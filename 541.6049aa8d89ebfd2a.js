"use strict";(self.webpackChunkauto_news=self.webpackChunkauto_news||[]).push([[541],{6541:(X,f,s)=>{s.r(f),s.d(f,{AutoModule:()=>E});var c=s(6895),u=s(7612),t=s(4650),d=s(9300);function C(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"span",2),t._uU(2),t.qZA(),t.BQk()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("routerLink",n.url),t.xp6(1),t.hij(" ",n.name," ")}}let A=(()=>{class e{constructor(n){this.router=n,this.breadCrumbs=[]}ngOnInit(){this.getRoutingChanges().subscribe(n=>{this.breadCrumbs=this.getBreadCrumbs(n)})}getBreadCrumbs(n){const i=n.routerEvent.url,a=[];if("/"===i)return a.push({url:i,name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),a;const l=this.cutUrlIntoArr(i).map(g=>({url:g,name:g}));return a.push({url:"/",name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},...l),a}cutUrlIntoArr(n){const r=n.split("/").pop();return void 0===r?[]:r.split(";")[0].split("-")}getRoutingChanges(){return this.router.events.pipe((0,d.h)(n=>n instanceof u.Xs))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bread-crumbs"]],decls:2,vars:1,consts:[[1,"bread-crumbs"],[4,"ngFor","ngForOf"],[1,"bread-crumbs__item",3,"routerLink"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t.YNc(1,C,3,2,"ng-container",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",r.breadCrumbs))},dependencies:[c.sg,u.rH],styles:['.bread-crumbs[_ngcontent-%COMP%]{display:flex;--gap: 10px;gap:var(--gap)}.bread-crumbs__item[_ngcontent-%COMP%]{display:flex;gap:var(--gap)}.bread-crumbs__item[_ngcontent-%COMP%]:not(:first-child):before{content:"->"}']}),e})(),w=(()=>{class e{constructor(){this.color="red"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["auto-page-main"]],decls:7,vars:0,consts:[[1,"header"],[1,"main"],[1,"container"],[1,"main__wrapper"],[1,"footer"]],template:function(n,r){1&n&&(t._UZ(0,"header",0),t.TgZ(1,"main",1)(2,"div",2)(3,"div",3),t._UZ(4,"bread-crumbs")(5,"router-outlet"),t.qZA()()(),t._UZ(6,"footer",4))},dependencies:[u.lC,A],styles:[".main__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}"]}),e})();var y=s(4049),P=s(4482),L=s(5403),M=s(3900),h=s(8505),_=s(1135),Z=s(529);console.log();let b=(()=>{class e{constructor(n){this.http=n,this.newsListUrl="https://webapi.autodoc.ru/api/news",this.listItemUrl="https://webapi.autodoc.ru/api/news/item"}getListAutoNews(n,r){return this.http.get(`${this.newsListUrl}/${n}/${r}`)}getAutoNewsItem(n){return this.http.get(`${this.listItemUrl}/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O=(()=>{class e{constructor(n){this.autoHttpService=n,this._behSubjListAuto=new _.X([]),this.autoList$=this._behSubjListAuto.asObservable(),this._options={page:1,quantity:10},this._initedPage=!1}getFirstPage(n){return this.autoHttpService.getListAutoNews(1,n).pipe((0,h.b)(r=>{this._options={quantity:n,page:1},this._behSubjListAuto.next(r.news),this._initedPage=!0}))}getNextPage(){if(!1===this._initedPage)throw new Error("\u041d\u0435 \u0437\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u0430 \u043f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430");const n=this._options.page+1;return this.autoHttpService.getListAutoNews(n,this._options.quantity).pipe((0,h.b)(r=>{const a=[...this._behSubjListAuto.value,...r.news];this._behSubjListAuto.next(a),this._options.page=n}))}getOptions(){return!1===this._initedPage?null:{...this._options}}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(b))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(){this.scrollPercentSubj=new _.X(0),this.scrollPercent$=this.scrollPercentSubj.asObservable(),this.initEventListener()}initEventListener(){document.addEventListener("scroll",()=>{const n=this.calcScrollPercent(document.documentElement);this.scrollPercentSubj.next(n)})}calcScrollPercent(n){return Math.round(n.scrollTop/(n.scrollHeight-n.clientHeight)*1e3)/1e3}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function U(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1)(2,"h2",2),t._uU(3),t.qZA(),t.TgZ(4,"p",3),t._uU(5),t.qZA(),t.TgZ(6,"time",4),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"div",5),t._uU(10),t.qZA(),t.TgZ(11,"div",6),t._UZ(12,"img",7),t.qZA()(),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.hij(" ",n.auto.title," "),t.xp6(2),t.hij(" ",n.auto.description," "),t.xp6(2),t.hij(" ",t.lcZ(8,5,n.auto.publishedDate)," "),t.xp6(3),t.hij(" ",n.auto.categoryType," "),t.xp6(2),t.Q6J("src",n.auto.titleImageUrl,t.LSH)}}let F=(()=>{class e{constructor(){this.auto=null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["auto-auto-mini"]],inputs:{auto:"auto"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"auto"],[1,"auto__title"],[1,"auto__description"],[1,"auto__date"],[1,"auto__category"],[1,"auto__img-wrapper"],["alt","",1,"auto__img",3,"src"]],template:function(n,r){1&n&&t.YNc(0,U,13,7,"ng-container",0),2&n&&t.Q6J("ngIf",r.auto)},dependencies:[c.O5,c.uU],styles:[".auto[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:5px;text-align:center;box-shadow:0 2px 5px #0000004d;display:flex;flex-direction:column;justify-content:center;height:100%;cursor:pointer}.auto__title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px}.auto__description[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px}.auto__date[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px}.auto__category[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}"]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(n,r){1&n&&t._UZ(0,"span",0)},styles:["[_nghost-%COMP%]{display:inline-block}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;position:relative;border:10px solid;border-color:rgba(255,255,255,.15) rgba(255,255,255,.25) rgba(255,255,255,.35) rgba(255,255,255,.5);box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@media (prefers-color-scheme: light){.loader[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.15) rgba(0,0,0,.25) rgba(0,0,0,.35) rgba(0,0,0,.5)}}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();const I=function(e){return["auto",e]};function N(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"auto-auto-mini",3),t.BQk()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("auto",n)("routerLink",t.VKq(2,I,n))}}function H(e,o){if(1&e&&(t.ynx(0),t.YNc(1,N,2,4,"ng-container",2),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let j=(()=>{class e{constructor(n,r){this.autoService=n,this.scrollPercentService=r,this.isLoading=!1,this.autoList$=this.autoService.autoList$,this.scrollPercentRender$=this.scrollPercentService.scrollPercent$.pipe((0,d.h)(i=>i>.9),(0,d.h)(()=>!this.isLoading),function S(e,o=y.z){return(0,P.e)((n,r)=>{let i=null,a=null,m=null;const l=()=>{if(i){i.unsubscribe(),i=null;const p=a;a=null,r.next(p)}};function g(){const p=m+e,x=o.now();if(x<p)return i=this.schedule(void 0,p-x),void r.add(i);l()}n.subscribe((0,L.x)(r,p=>{a=p,m=o.now(),i||(i=o.schedule(g,e),r.add(i))},()=>{l(),r.complete()},void 0,()=>{a=i=null}))})}(200),(0,M.w)(i=>(this.isLoading=!0,this.autoService.getNextPage())),(0,h.b)(()=>{this.isLoading=!1}))}ngOnInit(){this.autoService.getFirstPage(10).subscribe(),this.scrollPercentRender$.subscribe()}ngOnChanges(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(O),t.Y36(T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["auto-news-list"]],features:[t.TTD],decls:4,vars:3,consts:[["scrolled","",1,"auto-wrapper"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"auto","routerLink"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t.YNc(1,H,2,1,"ng-container",1),t.ALo(2,"async"),t.qZA(),t._UZ(3,"app-spinner")),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.autoList$)))},dependencies:[c.sg,c.O5,u.rH,F,v,c.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.auto-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;justify-content:space-between;gap:20px}@media (max-width: 800px){.auto-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 500px){.auto-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}}.m-0-auto[_ngcontent-%COMP%]{margin:0 auto}"]}),e})();var B=s(1481);let $=(()=>{class e{constructor(n){this.sanitizer=n}transform(n){return this.sanitizer.bypassSecurityTrustHtml(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(B.H7,16))},e.\u0275pipe=t.Yjl({name:"html",type:e,pure:!0}),e})();function Y(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"h1",3),t._uU(3),t.qZA(),t.TgZ(4,"time",4),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"img",6),t.qZA(),t._UZ(9,"div",7),t.ALo(10,"html"),t.qZA(),t.BQk()),2&e){const n=o.ngIf;t.xp6(3),t.hij(" ",n.title," "),t.xp6(2),t.hij(" ",t.lcZ(6,4,n.publishedDate)," "),t.xp6(3),t.Q6J("src",n.titleImageUrl,t.LSH),t.xp6(1),t.Q6J("innerHTML",t.lcZ(10,6,n.text),t.oJD)}}function z(e,o){1&e&&t._UZ(0,"app-spinner")}const Q=[{path:"",component:w,children:[{path:"",pathMatch:"full",component:j},{path:":id",pathMatch:"full",component:(()=>{class e{constructor(n,r){this.route=n,this.autoHttpService=r,this.miniUrl=this.route.snapshot.paramMap.get("url"),this.autoNewsItem$=this.autoHttpService.getAutoNewsItem(this.miniUrl)}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.gz),t.Y36(b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auto-full"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loaded",""],[1,"auto-full"],[1,"auto-full__title"],[1,"auto-full__date"],[1,"auto-full__img-wrapper"],["alt","",1,"auto-full__img",3,"src"],[1,"auto-full__description",3,"innerHTML"]],template:function(n,r){if(1&n&&(t.YNc(0,Y,11,8,"ng-container",0),t.ALo(1,"async"),t.YNc(2,z,1,0,"ng-template",null,1,t.W1O)),2&n){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.autoNewsItem$))("ngIfElse",i)}},dependencies:[c.O5,v,c.Ov,c.uU,$]}),e})()}]}];let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(Q),u.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,J]}),e})()}}]);